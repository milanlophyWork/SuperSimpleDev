<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors </title>
    </head>
    <body>
        <p>Rock Paper Scissors</p>

        <button onclick="
            playGame('rock')
        ">Rock</button>

        <button onclick="
            playGame('paper')
        ">Paper</button>

        <button onclick="
            playGame('scissors')
        ">Scissors</button>

        <button onclick="
            score.wins = 0
            score.lose = 0
            score.ties = 0
            localStorage.removeItem('score')
        ">Reset</button>

        <script>

            /*score = {
                wins : 0,
                lose : 0,
                ties : 0
            } // instead of setting score to zero each time page loads , set score to prev score stored in localStorage   
             
            */

            const score = JSON.parse(localStorage.getItem('score')) || { // write JSON.parse first then object, because JS if sees left side truthy won't run right side, so always set score to zero on page refresh.
                wins : 0,
                lose : 0,
                ties : 0  

            }       // display 0 if not scored yet. If scored previously, it is displayed.

        
            console.log(localStorage.getItem('message'))

            // console.log(localStorage.getItem('score')) // we want to use score from local storage to get prev score . But this is a string, we want to convert it to object for the same 

            function pickComputerMove(){
                const value = Math.random()
                let computerMove = ''

                if(value >= 0 && value < 1/3){
                    computerMove = 'rock'
                }else if(value >= 1/3 && value < 2/3){
                    computerMove = 'paper'
                }else{
                    computerMove = 'scissors'
                }
                return computerMove

            }

            function playGame(playerMove){
                let result = ''
                const computerMove = pickComputerMove()

                if(playerMove === computerMove){
                    result = 'Tie'
                    score.ties++
                }else if((playerMove === 'rock' && computerMove === 'paper') || (playerMove === 'paper' && computerMove === 'scissors') || (playerMove === 'scissors' && computerMove === 'rock')){
                    result = 'You lose'
                    score.lose++

                }else{
                    result = 'You won'
                    score.wins++
                }

                localStorage.setItem('message', 'hello') //  At first, null is displayed (check by deleting hello in local storage). On playing game 'hello' is stored in local storage which is displayed on refreshing the page. It appears automatically thenafter as it is permanently stored.

                localStorage.setItem('score', JSON.stringify(score))

                alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result} !
                wins : ${score.wins} Lose: ${score.lose} Ties : ${score.ties}`)
            }
        </script>
    </body>
</html>
